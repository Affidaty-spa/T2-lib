import * as util from 'util';
// console.log(util.inspect(myObject, false, null, true));
// console.log(util.inspect(myObject, {showHidden: false, depth: null, colors: true}))

import t2lib from '../index';
import { IBulkTxUnnamedObject } from '../src/transaction/bulkTransaction';

describe('Testing transaction class', () => {
    // node URL
    // const url = 'http://localhost:8000';
    // const url = 'http://t2.dev.trinci.net/0.2.3rc1/';
    // node network name
    // const network = 'breakingnet';

    // const client = new t2lib.Client(url, '');

    it('test1', async () => {
        // await client.autoDetectSettings();
        // const ticket = '122054dc2bd8671a34be502c8496e142c6610f511b19579adcc573e51795a1eb3bc5';
        // let tx = await client.txData(ticket);
        // console.log(await tx.toObjectWithBuffers());
        // let rec = await client.txReceipt(ticket);
        // console.log(rec);
        // if (rec.success) {
        //     console.log(t2lib.Utils.bytesToObject(rec.result));
        // } else {
        //     console.log(Buffer.from(rec.result).toString());
        // }

        const acc1 = new t2lib.Account();
        await acc1.generate();

        // const bulkTxHexStr = '93a762756c6b5f747893a3627631ae6d792d636f6f6c2d736368656d61929199a462727631d92e516d59486e45514c64663568374b59626a4650754853526b325350676458724a5746683557363936485066713769cd03e8c408ab82b741e023a412a6736b796e6574c42212202c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7aea97465726d696e61746593a56563647361a9736563703338347231c461045936d631b849bb5760bcf62e0d1261b6b6e227dc0a3892cbeec91be069aaa25996f276b271c2c53cba4be96d67edcadd66b793456290609102d5401f413cd1b5f4130b9cfaa68d30d0d25c3704cb72734cd32064365ff7042f5a3eee09b06cc1c40a4f706171756544617461c0c460f42ff94fcfb863ae4585bc1070756af1b8cc3def3ba47713bde78bf06f97a1098bb3364264537633594352acfbccb63dacfc4e2b47644e0cc3a930790b148ced3c4486bc8a8c5b82e2100b1ec4676c18f9111c4cb8f00b1405fc30cc3978e81e';
        // const bulkTxBytes = new Uint8Array(Buffer.from(bulkTxHexStr, 'hex'));
        const tempTxUnnObj: IBulkTxUnnamedObject = [
            'bulk_tx',
            [
                'bv1',
                [
                    [
                        [
                            'brv1',
                            'QmYHnEQLdf5h7KYbjFPuHSRk2SPgdXrJWFh5W696HPfq7i',
                            1000,
                            Buffer.from('q4K3QeAjpBI=', 'base64'),
                            'skynet',
                            Buffer.from('EiAsJrRraP/Gj/mbRTwdMEE0E0ItcGSDv6D5il6IYmbnrg==', 'base64'),
                            'terminate',
                            [
                                'ecdsa',
                                'secp384r1',
                                Buffer.from('BFk21jG4SbtXYLz2Lg0SYba24ifcCjiSy+7JG+BpqqJZlvJ2snHCxTy6S+ltZ+3K3Wa3k0VikGCRAtVAH0E80bX0Ewuc+qaNMNDSXDcEy3JzTNMgZDZf9wQvWj7uCbBswQ==', 'base64'),
                            ],
                            Buffer.from('T3BhcXVlRGF0YQ==', 'base64'),
                        ],
                    ],
                    null,
                ],
            ],
            Buffer.from('9C/5T8+4Y65FhbwQcHVq8bjMPe87pHcTveeL8G+XoQmLszZCZFN2M1lDUqz7zLY9rPxOK0dkTgzDqTB5CxSM7TxEhryKjFuC4hALHsRnbBj5ERxMuPALFAX8MMw5eOge', 'base64'),
        ];

        let tx = new t2lib.BulkTransaction();
        await tx.fromUnnamedObject(tempTxUnnObj);
        console.log(tx);

        // console.log(util.inspect(tempTxUnnObj, false, null, true));
    }, 30000);
});
